<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Document</title>
	<!-- 引入css -->
	<!-- 清除默认样式 -->
	<link rel="stylesheet" href="css/reset.css">
	<!-- 省略写base.css  公共类common.css 项目还是要有-->
	<!-- index.css -->
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<!-- header 固比固模型 固定宽度用绝对定位   比：使用标准流百分数 -->
	<div class="header">
		<div class="search">
			<span>搜索：目的地／酒店／景点／航班号</span>
		</div>
		<a href="" class="login">我的</a>
	</div>
	<div class="banner" id="banner">
		<ul class="carousel" id="carousel">
			<li><img src="images/banner0.jpg" alt="" /></li>
			<li><img src="images/banner1.jpg" alt="" /></li>
			<li><img src="images/banner2.jpg" alt="" /></li>
			<li><img src="images/banner3.jpg" alt="" /></li>
			<li><img src="images/banner4.jpg" alt="" /></li>
			<li><img src="images/banner0.jpg" alt="" /></li>
		</ul>
		<div class="circles" id="circles">
			<ol>
				<li class="active"></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ol>
		</div>
	</div>
	<!-- 主导航 -->
	<div class="main-nav">
		<div class="row">
			<ul>
				<li><a href="">酒店</a></li>
				<li><a href="">海外酒店</a></li>
				<li><a href="">团购</a></li>
				<li><a href="">特价酒店</a></li>
				<li><a href="">民宿·客栈</a></li>
			</ul>
		</div>
		<div class="row">
			<ul>
				<li><a href="">机票</a></li>
				<li><a href="">海外酒店</a></li>
				<li><a href="">团购</a></li>
				<li><a href="">特价酒店</a></li>
				<li><a href="">民宿·客栈</a></li>
			</ul>
		</div>
		<div class="row">
			<ul>
				<li><a href="">旅游</a></li>
				<li><a href="">海外酒店</a></li>
				<li><a href="">团购</a></li>
				<li><a href="">特价酒店</a></li>
				<li><a href="">民宿·客栈</a></li>
			</ul>
		</div>
		<div class="row">
			<ul>
				<li><a href="">景点·玩乐</a></li>
				<li><a href="">海外酒店</a></li>
				<li><a href="">团购</a></li>
				<li><a href="">礼品卡</a></li>
				<li><a href="">民宿·客栈</a></li>
				<li><a href="">民宿·客栈</a></li>
			</ul>
		</div>
	</div>
	<!-- 副导航 -->
	<div class="sub-nav">
		<ul>
			<li><a href="">自由行</a></li>
			<li><a href="">微领队</a></li>
			<li><a href="">一日游</a></li>
			<li><a href="">高端游</a></li>
			<li><a href="">酒店+景点</a></li>
			<li><a href="">海外玩乐</a></li>
			<li><a href="">外币兑换</a></li>
			<li><a href="">加盟合作</a></li>
			<li><a href="">机场停车</a></li>
			<li><a href="">行李寄送</a></li>
			<li><a href="">当季去哪</a></li>
			<li><a href="">更多服务</a></li>
		</ul>
	</div>
	<!-- 特卖汇 -->
	<div class="sale">
		<!-- 标题 -->
		<section class="title">
			<!-- h3为了提高seo，用户不可见，用padding-top去挤下去，不设置内容高度，文字会隐藏起来，paddint-top部分放背景图 -->
			<h3>特卖汇</h3>
			<a href="">领红包再下单</a>
		</section>
		<!-- 下面内容 -->
		<section class="content">
			<!-- 左半部分 -->
			<div class="left">
				<div class="pic">
					<img src="images/pic.jpg" alt="">
					<!-- 爆款 -->
					<span>爆款</span>
				</div>
				<div class="txt">
					<p class="first">三亚5日自由行(5钻)·【销量明星款 节后错峰】高星价优4晚·甄选热门度假型酒店 | 早订即享多重惠·冲5万人出游 | 暖冬度假天堂·年终避寒旅行地！</p>
					<p class="last"><i>¥</i><b>1499</b>起<span>2.7折</span></p>
				</div>
			</div>
			<!-- 右半部分 -->
			<div class="right">
				<div class="row">
					<p>千款特价</p>
					<p>走过路过不错过</p>
				</div>
				<div class="row">
					<div>
						<p>境外精选</p>
						<p><span>百元</span>出境游</p>
					</div>
					<div>
						<p>周边玩乐</p>
						<p><span>十元</span>度周末</p>
					</div>
				</div>
			</div>
		</section>
	</div>
	<!-- 热门活动 -->
	<div class="hot">
		<section class="title">
			<h3>热门活动</h3>
			<!-- 广告 -->
			<p></p>	
			<a href="">获取更多福利</a>	
		</section>
		<section class="content">
			<ul>
				<li><img src="images/ad_1.jpg" alt=""></li>
				<li><img src="images/ad_2.jpg" alt=""></li>
				<li><img src="images/ad_3.jpg" alt=""></li>
				<li><img src="images/ad_4.jpg" alt=""></li>
				<li><img src="images/ad_5.jpg" alt=""></li>
				<li><img src="images/ad_6.jpg" alt=""></li>
			</ul>
		</section>
	</div>
	<!-- 电话预订  下载   我的 -->
	<div class="download">
		<div class="tel">电话预订</div>
		<div class="dn">下载客户端</div>
		<div class="my">我的</div>
	</div>
	<!-- 网站地图 -->
	<div class="web-map">
		<div class="web-inner">
			<ul>
				<li><a href="">网站地图</a></li>
				<li><a href=""><span></span> Language <span></span></a></li>
				<li><a href="">电脑版</a></li>
			</ul>
			<p><a href="">&copy;2018携程旅行 <span>|</span></a><a href=""> 沪ICP备08023580号</a></p>
		</div>
	</div>
	<!-- js -->
	<script type="text/javascript" src="js/jquery-3.1.0.js"></script>
	<script type="text/javascript">
		var banner = document.getElementById("banner");
		var carousel = document.getElementById("carousel");
		var lis = carousel.getElementsByTagName("li");
		var circles = document.getElementById("circles").getElementsByTagName("ol")[0].getElementsByTagName("li");
		var length = lis.length - 1;

		var idx = 0;

		var r = 768 / 154;
		var width = document.documentElement.clientWidth;

		var height = width / r;

		banner.style.height = height + "px";

		var left = 0;

		var lock = true;

		// 添加touchstart事件
		carousel.addEventListener("touchstart", function(e) {

			if (!lock) {
				return;
			}

			// 取消过渡
			carousel.style.transition = "none";
			left = e.touches[0].clientX;

		});
		// touchmove事件
		carousel.addEventListener("touchmove", function(e) {
			if (!lock) {
				return;
			}
			var x = e.touches[0].clientX;

			if (idx === 0 && x > left) {
				carousel.style.left = x - left + - (width * length) + "px";
				return;
			}
			carousel.style.left = x - left + - (idx * width) + "px";
		})




		// 添加touchend事件
		carousel.addEventListener("touchend", function(e) {

			if (!lock) {
				return;
			}

			lock = false;

			carousel.style.transition = "all 0.7s ease 0s";
			// console.log(e);
			var x = e.changedTouches[0].clientX;
			if (x > left) {
				// 图片向右划动，图片从左侧出现，等价左按钮点击事件
				idx --;
				if (idx < 0) {
					idx = length - 1;
				}
			} else if (x < left) {
				// 图片向左划动，图片从右侧出现，等价右按钮点击事件
				idx ++;
				// 边界判断,提取到过渡检测中
				// if (idx > length -1) {
				// 	idx = 0;
				// }
			} else {
				lock = true;
				return;
			}
			// $("#circles ol li").eq(idx).addClass("active").siblings().removeClass("active");

			carousel.style.left = -idx * width +"px";
		})

		carousel.addEventListener("transitionend", function() {
			if (idx > length - 1) {
				carousel.style.transition = "none";
				idx = 0;
				carousel.style.left = -idx * width + "px";
			}
			lock = true;

		// circles[idx].classList.remove("active");
		// circles[idx].classList.add("active");
		console.log(idx);
		$("#circles ol li").eq(idx).addClass("active").siblings().removeClass("active");
			console.log("过渡完成");
		})



	</script>
</body>
</html>